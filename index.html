<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Welcome to My Website</title>
  <!-- Netlify Identity Widget 스크립트 -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js" defer></script>
</head>
<body>
  <h1>Welcome to My Website</h1>
  <a href="/admin">Go to CMS</a>
  <div>
    <!-- 로그인 및 회원가입 버튼 표시 -->
    <button id="login-button">Login / Signup</button>
  </div>
  <script>
    // Netlify Identity 초기화 코드
    document.addEventListener('DOMContentLoaded', function () {
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
        // 위젯을 초기화합니다.
        window.netlifyIdentity.init();
      }

      // 로그인 버튼 동작 추가
      document.getElementById('login-button').addEventListener('click', function () {
        if (window.netlifyIdentity) {
          window.netlifyIdentity.open();
        }
      });
    });
  </script>
</body>
</html>
